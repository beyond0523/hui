<!DOCTYPE html><html><head><meta charset="utf-8"><title>欢迎来到H的世界</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="stylesheet" href="../css/mui.min.css"><link rel="stylesheet" href="../css/app.css"><style>.mui-content-padded{padding:10px}body,body .mui-content{background-color:#fff!important}code{word-wrap:break-word;word-break:normal;font-size:90%;color:#c7254e;background-color:#f9f2f4;border-radius:4px}</style></head><body><header class="mui-bar mui-bar-nav"><a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a><h1 class="mui-title">网络请求</h1></header><div class="mui-content"><div class="mui-content-padded" style="padding-bottom:50px"><p style="text-indent:22px">H基于XMLHttpRequest，封装了常用的ajax函数，支持Get、Post请求方式， 支持返回json、xml、html、text、script数据类型；本示例使用<a href="http://www.oschina.net/question/82993_78609">RunJS</a>的Echo Ajax功能演示网络请求。</p><h4 class="mui-content-padded">发送请求：</h4><div class="mui-input-group"><div class="mui-input-row"><label>type:</label><select id="method"><option value="get">GET</option><option value="post">POST</option></select></div><div class="mui-input-row"><label>dataType:</label><select id="dataType"><option value="html">HTML</option><option value="json">JSON</option><option value="xml">XML</option></select></div><div class="mui-button-row"><button type="button" id="confirm" class="mui-btn mui-btn-primary">发送请求</button></div></div><h4 class="mui-content-padded">获得响应：</h4><code id="response"></code></div></div><script src="../js/mui.min.js"></script><script>!function(e){e.init({swipeBack:!0});var t=!0;mui.os.plus&&mui.plusReady(function(){plus.networkinfo.getCurrentType()==plus.networkinfo.CONNECTION_NONE&&(t=!1)});var n=document.getElementById("method"),o=document.getElementById("dataType"),i=document.getElementById("response"),r=function(e){var t=o.value;"json"===t?e=JSON.stringify(e):"xml"===t&&(e=(new XMLSerializer).serializeToString(e).replace(/</g,"&lt;").replace(/>/g,"&gt;")),i.innerHTML=e};e.ajaxSettings.beforeSend=function(e,t){console.log("beforeSend:::"+JSON.stringify(t))},e.ajaxSettings.complete=function(e,t){console.log("complete:::"+t)};var a=function(){var t="http://runjs.cn/action/echo/",a=n.value,u=o.value,l={name:"H",version:"1.0.0",author:"huangchaowei",description:"最接近原生APP体验的高性能前端框架"};t+="html"===u?"text":u,i.innerHTML="正在请求中...","get"===a?"json"===u?e.getJSON(t,l,r):e.get(t,l,r,u):"post"===a&&e.post(t,l,r,u)};document.getElementById("confirm").addEventListener("tap",function(){t?a():mui.toast("当前网络不给力，请稍后再试")}),e("body").on("tap","a",function(e){var t=this.getAttribute("href");t&&(window.plus?plus.runtime.openURL(t):location.href=t)})}(mui)</script></body></html>